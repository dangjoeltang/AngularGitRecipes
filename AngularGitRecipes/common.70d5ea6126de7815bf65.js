(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{"2A0u":function(n,t,e){"use strict";var l=e("CcnG"),o=e("Ip0R");e("msjX"),e("qc5V"),e("t/Na"),e("SZbH"),e.d(t,"a",function(){return r}),e.d(t,"b",function(){return u});var r=l.pb({encapsulation:0,styles:[["input[_ngcontent-%COMP%]{display:none}#addPhoto[_ngcontent-%COMP%], #removePhoto[_ngcontent-%COMP%], #uploadPhotos[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);-ms-transform:translate(-50%,-50%);opacity:.3}#addPhoto[_ngcontent-%COMP%]:hover, #removePhoto[_ngcontent-%COMP%]:hover{opacity:.8}.wrapper[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;background:#3c3c3c;padding:1rem}.box-preview[_ngcontent-%COMP%]{position:relative;width:170px;height:170px;background-color:#fff;border:2px dashed grey}.box-preview[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:166px;height:166px}"]],data:{}});function i(n){return l.Lb(0,[(n()(),l.rb(0,0,null,null,3,"div",[["class","box-preview"]],null,null,null,null,null)),(n()(),l.rb(1,0,null,null,0,"img",[["alt",""]],[[8,"src",4]],null,null,null,null)),(n()(),l.rb(2,0,null,null,1,"a",[["id","removePhoto"]],null,[[null,"click"]],function(n,t,e){var l=!0;return"click"===t&&(l=!1!==n.component.removePhoto(n.context.index)&&l),l},null,null)),(n()(),l.rb(3,0,null,null,0,"i",[["class","fas fa-times-circle fa-5x"]],null,null,null,null,null))],null,function(n,t){n(t,1,0,t.component.imageSrc[t.context.index])})}function u(n){return l.Lb(0,[(n()(),l.rb(0,0,null,null,7,"div",[["class","wrapper container-fluid"]],null,null,null,null,null)),(n()(),l.rb(1,0,null,null,3,"label",[["for","new-image"]],null,null,null,null,null)),(n()(),l.rb(2,0,null,null,2,"div",[["class","box-preview"]],null,null,null,null,null)),(n()(),l.rb(3,0,null,null,1,"a",[["id","addPhoto"]],null,null,null,null,null)),(n()(),l.rb(4,0,null,null,0,"i",[["class","fas fa-camera fa-5x"]],null,null,null,null,null)),(n()(),l.rb(5,0,null,null,0,"input",[["id","new-image"],["name","photoInput"],["type","file"]],null,[[null,"change"]],function(n,t,e){var l=!0;return"change"===t&&(l=!1!==n.component.onFileSelect(e)&&l),l},null,null)),(n()(),l.ib(16777216,null,null,1,null,i)),l.qb(7,278528,null,0,o.l,[l.Q,l.N,l.t],{ngForOf:[0,"ngForOf"]},null)],function(n,t){n(t,7,0,t.component.photosArray)},null)}},WgIl:function(n,t,e){"use strict";e.d(t,"a",function(){return o});var l=e("4Kj8"),o=function(){function n(n,t,e){this.tempRef=n,this.vcRef=t,this.componentFactoryResolver=e,this.spinnerFactory=this.componentFactoryResolver.resolveComponentFactory(l.a)}return Object.defineProperty(n.prototype,"showLoadingSpinner",{set:function(n){this.vcRef.clear(),n&&(this.spinnerComponent=this.vcRef.createComponent(this.spinnerFactory))},enumerable:!0,configurable:!0}),n}()},msjX:function(n,t,e){"use strict";e.d(t,"a",function(){return r});var l=e("AytR"),o=(e("qc5V"),e("CcnG")),r=function(){function n(n,t,e){this.api=n,this.http=t,this.alertService=e,this.valueChange=new o.m,this.imageSrc=[],this.photosArray=[],this.isDisabled=!0,this.mediaUrl=l.a.media_url}return n.prototype.ngOnInit=function(){var n=this;try{this.eventsSubscription=this.events.subscribe(function(t){n.populateImages(t)})}catch(t){t instanceof TypeError&&console.log("Nothing to subscribe to. Are you playing in the sandbox?")}},n.prototype.populateImages=function(n){var t=this;this.photosArray=n,this.imageSrc=n.map(function(n){return t.mediaUrl+"/"+n}),this.valueChange.emit(this.photosArray)},n.prototype.addPhoto=function(n){this.photosArray.push(n)},n.prototype.removePhoto=function(n){var t=this.photosArray[n];this.photosArray.splice(n,1),this.imageSrc.splice(n,1),this.valueChange.emit(this.photosArray),this.alertService.success('Removed photo "'+t+'"')},n.prototype.onFileSelect=function(n){var t=this;if(n.target.files&&n.target.files[0]){var e=new FileReader;e.onload=function(n){t.imageSrc.push(n.target.result)},e.readAsDataURL(n.target.files[0])}var l=n.target.files[0],o="recipe-photos/"+n.target.files[0].name,r=n.target.files[0].type;this.alertService.info(o+" selected."),this.api.post("sign_s3/",{file_name:o,file_type:r}).subscribe(function(n){t.isDisabled=!1,t.addPhoto(n.path),t.uploadPhoto(n.data.url,n.data.fields,l)})},n.prototype.uploadPhoto=function(n,t,e){var l=this,o=new FormData;return Object.keys(t).forEach(function(n){return o.append(n,t[n])}),o.append("file",e),this.http.post(n,o).subscribe(function(n){l.valueChange.emit(l.photosArray),l.alertService.success(e.name+" uploaded successfully!")},function(n){l.alertService.error("Something went wrong with the upload.")})},n}()}}]);